---
title: Customizing your Redirects
description: The Account Portal offers a comprehensive solution for managing user authentication and profile management in your web application and is the fastest way to add Clerk's authentication to your application with minimal code required.
---
import { CodeBlockTabs } from "@/components/CodeBlockTabs";
import { Steps, Tab, Tabs } from 'nextra-theme-docs';

# Customizing your Account Portal redirects

Clerk automatically redirects users after sign-in or sign-up back to where they came from by appending a `redirect_url` query param on the Account Portal page. 

If you want to customize this and, for example, redirect users to `/dashboard` on sign-in and `/onboarding` on sign-up this is easily done as well. 


## Next.js Middleware


**Environment Variables**

First, you can define the paths directly in the environment variables.

```sh
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/onboarding
```

**afterAuth() Function**

If you want a more programmatically generated redirect option, you can also use the â€˜afterAuth()â€™ function from our Clerk Middleware.

```tsx
export default authMiddleware({
  afterAuth(auth, req, evt) {
    // handle users who aren't authenticated
    if (!auth.userId && !auth.isPublicRoute) {
      if (req.url === "/onboarding") {
        return redirectToSignUp({ returnBackUrl: "/onboarding" });
      } else if (req.url === "/dashboard") {
        return redirectToSignIn({ returnBackUrl: "/dashboard" });
      }
    }
  },
  publicRoutes: ["/publicly-available-pages"],
});
```

<Callout type="info" emoji="ðŸ’¡">
  Note that, if configured, - the afterAuth() function will always take precedence over the environment variables.
</Callout>


## Control Components

If you're not using Middleware, you can also explicitly define the redirect paths by passing the `afterSignInUrl` and `afterSignUpUrl` props in the respective components:

```javascript copy
function App() {
  return (
    <ClerkProvider publishableKey={clerkPubKey} afterSignInUrl={'/dashboard'} afterSignUpUrl={'/onboarding'} >
      <SignedIn>
        <Welcome />
      </SignedIn>
      <SignedOut>
        <RedirectToSignIn afterSignInUrl={'/dashboard'} afterSignUpUrl={'/onboarding'} />
      </SignedOut>
    </ClerkProvider>
  );
}
```

<Callout type="info" emoji="ðŸ’¡">
Note that, if configured, `RedirectToSignIn` or `RedirectToSignUp` child components will always take precedence over `ClerkProvider`. 
</Callout>


## Button Components

In the case that you are using a Sign In (or Sign Up) button, say from your marketing website, you can also pass through the props into those components. We recommend defining both AfterSignInUrl and AfterSignupUrl redirects in each button as some users may choose to sign up instead after attempting to sign in.

```javascript copy

function App() {
  return (
        <SignInButton afterSignInUrl='/dashboard' afterSignUpUrl='/onboarding'>
        <SignUpButton afterSignInUrl='/dashboard' afterSignUpUrl='/onboarding'>
  );
}

```

## Dashboard Fallbacks

If you provide users with a direct link to the account portal pages, you can specify the redirects as a fallback in the dashboard as well. 

<Callout type="info" emoji="ðŸ’¡">
Note that, while we provide this functionality as a fallback **we do not recommend** configuring this through the dashboard and encourage you to specify redirects in your application flows instead. 
</Callout>


1. For development, set your static fallback localhost (e.g. http://localhost:3000) that we will use if we are unable to retrieve a dev browser for your client. In production, this will always be your application homepage. 

    
    ![Account Portal Paths](/docs/images/account-portal/account_portal_paths.png)
  

2. Next, you can specify the fallback redirects through the dashboard as well. 

    
    ![Account Portal Redirects](/docs/images/account-portal/account_portal_redirects.png)
  